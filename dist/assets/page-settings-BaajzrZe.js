import{r as e,j as i,a}from"./chunk-BLWUN8J3.js";import{a as t,u as n}from"./chunk-B5QGrkOq.js";import{B as c,d as r,f as s,aL as l,aM as o,aN as d,w as h,aO as u,ag as g,aP as p,at as m,x as y,I as v,aQ as f,n as b,aR as S,aS as k,aT as C,z as w,a1 as x,a4 as A,J as T,aU as N,aV as F,G as E,aW as M,g as P,aX as z,e as D,az as B}from"./chunk-IloZ2OGx.js";import"./chunk-DIdkmVTH.js";import"./chunk-DU-2Uplp.js";const R=new class{async getSettings(){return(await t.get("/settings")).data}async updateSettings(e){return(await t.put("/settings",e)).data}async resetSettings(){return(await t.post("/settings/reset")).data}async exportSettings(){return(await t.get("/settings/export",{responseType:"blob"})).data}async importSettings(e){const i=new FormData;i.append("settings",e);return(await t.post("/settings/import",i,{headers:{"Content-Type":"multipart/form-data"}})).data}async updateProfileSettings(e){await t.put("/settings/profile",e)}async updateNotificationSettings(e){await t.put("/settings/notifications",e)}async updatePrivacySettings(e){await t.put("/settings/privacy",e)}async updateAppearanceSettings(e){await t.put("/settings/appearance",e)}async updateAccessibilitySettings(e){await t.put("/settings/accessibility",e)}async updateSecuritySettings(e){await t.put("/settings/security",e)}async enable2FA(){return(await t.post("/settings/security/2fa/enable")).data}async disable2FA(e){await t.post("/settings/security/2fa/disable",{code:e})}async verify2FA(e){await t.post("/settings/security/2fa/verify",{code:e})}async getConnectedDevices(){return(await t.get("/settings/security/devices")).data}async revokeDevice(e){await t.delete(`/settings/security/devices/${e}`)}async getLoginHistory(){return(await t.get("/settings/security/login-history")).data}},W=()=>{const[i,a]=e.useState(null),[t,n]=e.useState(!1),[c,r]=e.useState(null);return e.useEffect(()=>{(async()=>{try{n(!0),r(null);const e=await R.getSettings();a(e)}catch(e){r(e instanceof Error?e.message:"Failed to fetch settings")}finally{n(!1)}})()},[]),{settings:i,loading:t,error:c,updateSettings:async e=>{try{n(!0);const i=await R.updateSettings(e);a(i)}catch(i){throw r(i instanceof Error?i.message:"Failed to update settings"),i}finally{n(!1)}},resetSettings:async()=>{try{n(!0);const e=await R.resetSettings();a(e)}catch(e){throw r(e instanceof Error?e.message:"Failed to reset settings"),e}finally{n(!1)}},exportSettings:async()=>{try{return await R.exportSettings()}catch(e){throw r(e instanceof Error?e.message:"Failed to export settings"),e}},importSettings:async e=>{try{n(!0);const i=await R.importSettings(e);a(i)}catch(i){throw r(i instanceof Error?i.message:"Failed to import settings"),i}finally{n(!1)}}}},L=({children:e,value:a,index:t})=>i("div",{hidden:a!==t,children:a===t&&i(c,{sx:{p:3},children:e})}),I=()=>{const{user:t}=n(),{settings:R,updateSettings:I,loading:j}=W(),[U,V]=e.useState(0),[O,H]=e.useState(null),[_,G]=e.useState(!1),[J,K]=e.useState({open:!1,message:"",severity:"success"});e.useEffect(()=>{R&&H(R)},[R]);const Q=(e,i,a)=>{O&&H({...O,[e]:{...O[e],[i]:a}})};return O?a(c,{sx:{p:3},children:[i(r,{variant:"h4",component:"h1",gutterBottom:!0,children:"Settings"}),a(s,{children:[i(c,{sx:{borderBottom:1,borderColor:"divider"},children:a(l,{value:U,onChange:(e,i)=>{V(i)},variant:"scrollable",scrollButtons:"auto",children:[i(o,{label:"Profile",icon:i(d,{})}),i(o,{label:"Notifications",icon:i(h,{})}),i(o,{label:"Privacy",icon:i(u,{})}),i(o,{label:"Appearance",icon:i(g,{})}),i(o,{label:"Accessibility",icon:i(p,{})}),i(o,{label:"Security",icon:i(u,{})})]})}),i(L,{value:U,index:0,children:a(m,{container:!0,spacing:3,children:[i(m,{item:!0,xs:12,md:4,children:a(c,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:2},children:[i(y,{src:O.profile.avatar,sx:{width:120,height:120},children:O.profile.name[0]}),i("input",{accept:"image/*",style:{display:"none"},id:"avatar-upload",type:"file",onChange:e=>{var i;const a=null==(i=e.target.files)?void 0:i[0];if(a){const e=new FileReader;e.onload=e=>{var i;const a=null==(i=e.target)?void 0:i.result;Q("profile","avatar",a)},e.readAsDataURL(a)}},"aria-label":"Upload avatar image"}),i("label",{htmlFor:"avatar-upload",children:i(v,{color:"primary",component:"span",children:i(f,{})})})]})}),i(m,{item:!0,xs:12,md:8,children:a(c,{sx:{display:"flex",flexDirection:"column",gap:2},children:[i(b,{label:"Full Name",value:O.profile.name,onChange:e=>Q("profile","name",e.target.value),fullWidth:!0}),i(b,{label:"Email",value:O.profile.email,onChange:e=>Q("profile","email",e.target.value),fullWidth:!0,disabled:!0}),i(b,{label:"Bio",value:O.profile.bio,onChange:e=>Q("profile","bio",e.target.value),multiline:!0,rows:3,fullWidth:!0}),a(S,{fullWidth:!0,children:[i(k,{children:"Timezone"}),a(C,{value:O.profile.timezone,onChange:e=>Q("profile","timezone",e.target.value),label:"Timezone",children:[i(w,{value:"UTC",children:"UTC"}),i(w,{value:"America/New_York",children:"Eastern Time"}),i(w,{value:"America/Chicago",children:"Central Time"}),i(w,{value:"America/Denver",children:"Mountain Time"}),i(w,{value:"America/Los_Angeles",children:"Pacific Time"}),i(w,{value:"Asia/Ho_Chi_Minh",children:"Vietnam Time"})]})]}),a(S,{fullWidth:!0,children:[i(k,{children:"Language"}),a(C,{value:O.profile.language,onChange:e=>Q("profile","language",e.target.value),label:"Language",children:[i(w,{value:"en",children:"English"}),i(w,{value:"vi",children:"Tiếng Việt"}),i(w,{value:"zh",children:"中文"}),i(w,{value:"ja",children:"日本語"}),i(w,{value:"ko",children:"한국어"})]})]})]})})]})}),a(L,{value:U,index:1,children:[i(r,{variant:"h6",gutterBottom:!0,children:"Notification Preferences"}),a(x,{children:[a(A,{children:[i(T,{primary:"Email Notifications",secondary:"Receive notifications via email"}),i(F,{children:i(N,{checked:O.notifications.emailNotifications,onChange:e=>Q("notifications","emailNotifications",e.target.checked)})})]}),a(A,{children:[i(T,{primary:"Push Notifications",secondary:"Receive browser push notifications"}),i(F,{children:i(N,{checked:O.notifications.pushNotifications,onChange:e=>Q("notifications","pushNotifications",e.target.checked)})})]}),a(A,{children:[i(T,{primary:"SMS Notifications",secondary:"Receive notifications via SMS"}),i(F,{children:i(N,{checked:O.notifications.smsNotifications,onChange:e=>Q("notifications","smsNotifications",e.target.checked)})})]}),i(E,{}),a(A,{children:[i(T,{primary:"Content Updates",secondary:"Notifications about content changes and approvals"}),i(F,{children:i(N,{checked:O.notifications.contentUpdates,onChange:e=>Q("notifications","contentUpdates",e.target.checked)})})]}),a(A,{children:[i(T,{primary:"Team Activity",secondary:"Notifications about team member activities"}),i(F,{children:i(N,{checked:O.notifications.teamActivity,onChange:e=>Q("notifications","teamActivity",e.target.checked)})})]}),a(A,{children:[i(T,{primary:"System Alerts",secondary:"Important system notifications and updates"}),i(F,{children:i(N,{checked:O.notifications.systemAlerts,onChange:e=>Q("notifications","systemAlerts",e.target.checked)})})]}),a(A,{children:[i(T,{primary:"Marketing Emails",secondary:"Product updates and promotional content"}),i(F,{children:i(N,{checked:O.notifications.marketingEmails,onChange:e=>Q("notifications","marketingEmails",e.target.checked)})})]})]})]}),a(L,{value:U,index:2,children:[i(r,{variant:"h6",gutterBottom:!0,children:"Privacy Settings"}),a(c,{sx:{display:"flex",flexDirection:"column",gap:2},children:[a(S,{fullWidth:!0,children:[i(k,{children:"Profile Visibility"}),a(C,{value:O.privacy.profileVisibility,onChange:e=>Q("privacy","profileVisibility",e.target.value),label:"Profile Visibility",children:[i(w,{value:"public",children:"Public"}),i(w,{value:"team",children:"Team Only"}),i(w,{value:"private",children:"Private"})]})]}),i(M,{control:i(N,{checked:O.privacy.showOnlineStatus,onChange:e=>Q("privacy","showOnlineStatus",e.target.checked)}),label:"Show online status to team members"}),i(M,{control:i(N,{checked:O.privacy.allowMentions,onChange:e=>Q("privacy","allowMentions",e.target.checked)}),label:"Allow others to mention me in comments"}),i(M,{control:i(N,{checked:O.privacy.dataCollection,onChange:e=>Q("privacy","dataCollection",e.target.checked)}),label:"Allow data collection for analytics and improvements"})]})]}),a(L,{value:U,index:3,children:[i(r,{variant:"h6",gutterBottom:!0,children:"Appearance Settings"}),a(c,{sx:{display:"flex",flexDirection:"column",gap:2},children:[a(S,{fullWidth:!0,children:[i(k,{children:"Theme"}),a(C,{value:O.appearance.theme,onChange:e=>Q("appearance","theme",e.target.value),label:"Theme",children:[i(w,{value:"light",children:"Light"}),i(w,{value:"dark",children:"Dark"}),i(w,{value:"auto",children:"Auto (System)"})]})]}),a(S,{fullWidth:!0,children:[i(k,{children:"Color Scheme"}),a(C,{value:O.appearance.colorScheme,onChange:e=>Q("appearance","colorScheme",e.target.value),label:"Color Scheme",children:[i(w,{value:"default",children:"Default"}),i(w,{value:"blue",children:"Blue"}),i(w,{value:"green",children:"Green"}),i(w,{value:"purple",children:"Purple"})]})]}),a(S,{fullWidth:!0,children:[i(k,{children:"Font Size"}),a(C,{value:O.appearance.fontSize,onChange:e=>Q("appearance","fontSize",e.target.value),label:"Font Size",children:[i(w,{value:"small",children:"Small"}),i(w,{value:"medium",children:"Medium"}),i(w,{value:"large",children:"Large"})]})]}),i(M,{control:i(N,{checked:O.appearance.compactMode,onChange:e=>Q("appearance","compactMode",e.target.checked)}),label:"Compact mode (reduce spacing and padding)"})]})]}),a(L,{value:U,index:4,children:[i(r,{variant:"h6",gutterBottom:!0,children:"Accessibility Settings"}),a(x,{children:[a(A,{children:[i(T,{primary:"High Contrast",secondary:"Increase contrast for better visibility"}),i(F,{children:i(N,{checked:O.accessibility.highContrast,onChange:e=>Q("accessibility","highContrast",e.target.checked)})})]}),a(A,{children:[i(T,{primary:"Reduced Motion",secondary:"Minimize animations and transitions"}),i(F,{children:i(N,{checked:O.accessibility.reducedMotion,onChange:e=>Q("accessibility","reducedMotion",e.target.checked)})})]}),a(A,{children:[i(T,{primary:"Screen Reader Support",secondary:"Optimize for screen reader compatibility"}),i(F,{children:i(N,{checked:O.accessibility.screenReader,onChange:e=>Q("accessibility","screenReader",e.target.checked)})})]}),a(A,{children:[i(T,{primary:"Enhanced Keyboard Navigation",secondary:"Improve keyboard-only navigation"}),i(F,{children:i(N,{checked:O.accessibility.keyboardNavigation,onChange:e=>Q("accessibility","keyboardNavigation",e.target.checked)})})]}),a(A,{children:[i(T,{primary:"Focus Indicators",secondary:"Enhanced visual focus indicators"}),i(F,{children:i(N,{checked:O.accessibility.focusIndicators,onChange:e=>Q("accessibility","focusIndicators",e.target.checked)})})]})]})]}),a(L,{value:U,index:5,children:[i(r,{variant:"h6",gutterBottom:!0,children:"Security Settings"}),a(x,{children:[a(A,{children:[i(T,{primary:"Two-Factor Authentication",secondary:"Add an extra layer of security to your account"}),i(F,{children:i(N,{checked:O.security.twoFactorEnabled,onChange:e=>Q("security","twoFactorEnabled",e.target.checked)})})]}),a(A,{children:[i(T,{primary:"Login Alerts",secondary:"Get notified of new login attempts"}),i(F,{children:i(N,{checked:O.security.loginAlerts,onChange:e=>Q("security","loginAlerts",e.target.checked)})})]})]}),i(c,{sx:{mt:2},children:a(S,{fullWidth:!0,children:[i(k,{children:"Session Timeout (minutes)"}),a(C,{value:O.security.sessionTimeout,onChange:e=>Q("security","sessionTimeout",e.target.value),label:"Session Timeout (minutes)",children:[i(w,{value:15,children:"15 minutes"}),i(w,{value:30,children:"30 minutes"}),i(w,{value:60,children:"1 hour"}),i(w,{value:240,children:"4 hours"}),i(w,{value:480,children:"8 hours"})]})]})})]}),a(c,{sx:{p:3,display:"flex",justifyContent:"flex-end",gap:2},children:[i(P,{variant:"outlined",onClick:()=>H(R),children:"Reset"}),i(P,{variant:"contained",startIcon:i(z,{}),onClick:async()=>{if(O)try{await I(O),K({open:!0,message:"Settings saved successfully",severity:"success"})}catch(e){K({open:!0,message:"Failed to save settings",severity:"error"})}},disabled:j,children:"Save Settings"})]})]}),i(B,{open:J.open,autoHideDuration:6e3,onClose:()=>K({...J,open:!1}),children:i(D,{severity:J.severity,onClose:()=>K({...J,open:!1}),children:J.message})})]}):i(c,{children:"Loading..."})};export{I as default};
