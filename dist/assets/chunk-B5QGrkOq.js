var e=Object.defineProperty,t=(t,r,a)=>((t,r,a)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[r]=a)(t,"symbol"!=typeof r?r+"":r,a);import{R as r,j as a,a as n,r as i,u as o,b as s,F as l,S as c,O as d,k as h,N as u}from"./chunk-BLWUN8J3.js";import{s as p,B as m,I as g,A as f,T as y,Z as x,a as w,C as b,b as v,V as k,c as C,K as S,F as T,d as E,e as A,f as I,E as R,g as z,R as N,h as P,i as O,j as D,k as L,u as U,l as M,M as _,m as F,L as K,N as W,n as $,o as H,S as j,p as B,q as V,r as G,t as Y,D as q,v as J,w as X,x as Q,y as Z,z as ee,G as te,H as re,P as ae,J as ne,O as ie,Q as oe,U as se,W as le,X as ce,Y as de,_ as he,$ as ue,a0 as pe,a1 as me,a2 as ge,a3 as fe,a4 as ye,a5 as xe,a6 as we,a7 as be,a8 as ve,a9 as ke,aa as Ce,ab as Se,ac as Te,ad as Ee,ae as Ae,af as Ie,ag as Re,ah as ze,ai as Ne,aj as Pe,ak as Oe,al as De,am as Le,an as Ue,ao as Me,ap as _e,aq as Fe,ar as Ke,as as We}from"./chunk-IloZ2OGx.js";import{a as $e}from"./chunk-DU-2Uplp.js";const He=r.createContext(void 0),je=({children:e})=>{const[t,n]=r.useState(16),[i,o]=r.useState(!1),[s,l]=r.useState(!1),[c,d]=r.useState(!1),[h,u]=r.useState(!1);r.useEffect(()=>{const e=localStorage.getItem("accessibility-settings");if(e){const t=JSON.parse(e);n(t.fontSize||16),o(t.highContrast||!1),l(t.reducedMotion||!1),d(t.screenReader||!1)}window.matchMedia("(prefers-reduced-motion: reduce)").matches&&l(!0);const t=e=>{"Tab"===e.key&&u(!0)},r=()=>{u(!1)};return document.addEventListener("keydown",t),document.addEventListener("mousedown",r),()=>{document.removeEventListener("keydown",t),document.removeEventListener("mousedown",r)}},[]),r.useEffect(()=>{const e={fontSize:t,highContrast:i,reducedMotion:s,screenReader:c};localStorage.setItem("accessibility-settings",JSON.stringify(e))},[t,i,s,c]),r.useEffect(()=>{document.documentElement.style.fontSize=`${t}px`,i?document.documentElement.classList.add("high-contrast"):document.documentElement.classList.remove("high-contrast"),s?document.documentElement.classList.add("reduced-motion"):document.documentElement.classList.remove("reduced-motion"),h?document.documentElement.classList.add("keyboard-navigation"):document.documentElement.classList.remove("keyboard-navigation")},[t,i,s,h]);const p={fontSize:t,highContrast:i,reducedMotion:s,screenReader:c,keyboardNavigation:h,increaseFontSize:()=>{n(e=>Math.min(e+2,24))},decreaseFontSize:()=>{n(e=>Math.max(e-2,12))},toggleHighContrast:()=>{o(e=>!e)},toggleReducedMotion:()=>{l(e=>!e)},toggleScreenReader:()=>{d(e=>!e)},resetSettings:()=>{n(16),o(!1),l(!1),d(!1)}};return a(He.Provider,{value:p,children:e})},Be=p(m)(({theme:e})=>({position:"fixed",top:"50%",right:0,transform:"translateY(-50%)",backgroundColor:e.palette.background.paper,border:`1px solid ${e.palette.divider}`,borderRadius:"8px 0 0 8px",padding:e.spacing(1),zIndex:e.zIndex.fab,display:"flex",flexDirection:"column",gap:e.spacing(1),boxShadow:e.shadows[4],transition:"transform 0.3s ease","&:hover":{transform:"translateY(-50%) translateX(-4px)"}})),Ve=({show:e=!0})=>{const{fontSize:t,highContrast:i,reducedMotion:o,screenReader:s,increaseFontSize:l,decreaseFontSize:c,toggleHighContrast:d,toggleReducedMotion:h,toggleScreenReader:u,resetSettings:p}=(()=>{const e=r.useContext(He);if(!e)throw new Error("useAccessibility must be used within AccessibilityProvider");return e})(),[E,A]=r.useState(!1);return e?n(Be,{children:[a(y,{title:"Accessibility Options",placement:"left",children:a(g,{onClick:()=>A(!E),"aria-label":"Toggle accessibility options","aria-expanded":E,color:E?"primary":"default",children:a(f,{})})}),a(T,{in:E,children:n(m,{sx:{display:"flex",flexDirection:"column",gap:1},children:[a(y,{title:"Increase font size",placement:"left",children:a(g,{onClick:l,disabled:t>=24,"aria-label":"Increase font size",size:"small",children:a(x,{})})}),a(y,{title:"Decrease font size",placement:"left",children:a(g,{onClick:c,disabled:t<=12,"aria-label":"Decrease font size",size:"small",children:a(w,{})})}),a(y,{title:"Toggle high contrast",placement:"left",children:a(g,{onClick:d,color:i?"primary":"default","aria-label":"Toggle high contrast mode","aria-pressed":i,size:"small",children:a(b,{})})}),a(y,{title:"Toggle reduced motion",placement:"left",children:a(g,{onClick:h,color:o?"primary":"default","aria-label":"Toggle reduced motion","aria-pressed":o,size:"small",children:a(v,{})})}),a(y,{title:"Toggle screen reader mode",placement:"left",children:a(g,{onClick:u,color:s?"primary":"default","aria-label":"Toggle screen reader mode","aria-pressed":s,size:"small",children:a(s?k:C,{})})}),a(y,{title:"Reset accessibility settings",placement:"left",children:a(g,{onClick:p,"aria-label":"Reset accessibility settings",size:"small",children:a(S,{})})})]})})]}):null};if("undefined"!=typeof document){const e=document.createElement("style");e.textContent="\n  /* High contrast mode */\n  .high-contrast {\n    filter: contrast(150%);\n  }\n\n  .high-contrast * {\n    border-color: currentColor !important;\n  }\n\n  /* Reduced motion */\n  .reduced-motion *,\n  .reduced-motion *::before,\n  .reduced-motion *::after {\n    animation-duration: 0.01ms !important;\n    animation-iteration-count: 1 !important;\n    transition-duration: 0.01ms !important;\n    scroll-behavior: auto !important;\n  }\n\n  /* Keyboard navigation focus styles */\n  .keyboard-navigation *:focus-visible {\n    outline: 2px solid #1976d2;\n    outline-offset: 2px;\n  }\n\n  /* Screen reader only content */\n  .sr-only {\n    position: absolute;\n    width: 1px;\n    height: 1px;\n    padding: 0;\n    margin: -1px;\n    overflow: hidden;\n    clip: rect(0, 0, 0, 0);\n    white-space: nowrap;\n    border: 0;\n  }\n\n  /* Focus trap styles */\n  .focus-trap {\n    position: relative;\n  }\n\n  .focus-trap::before,\n  .focus-trap::after {\n    content: '';\n    position: absolute;\n    width: 1px;\n    height: 1px;\n    opacity: 0;\n    pointer-events: none;\n  }\n",document.head.appendChild(e)}class Ge extends i.Component{constructor(e){super(e),t(this,"maxRetries",3),t(this,"logErrorToService",(e,t)=>{window.gtag&&window.gtag("event","exception",{description:e.message,fatal:!1})}),t(this,"handleRetry",()=>{this.state.retryCount<this.maxRetries?this.setState(e=>({hasError:!1,error:null,errorInfo:null,showDetails:!1,retryCount:e.retryCount+1})):window.location.reload()}),t(this,"handleReload",()=>{window.location.reload()}),t(this,"toggleDetails",()=>{this.setState(e=>({showDetails:!e.showDetails}))}),t(this,"renderErrorDetails",()=>{const{error:e,errorInfo:t}=this.state;return e&&t?n(m,{sx:{mt:2},children:[a(A,{severity:"error",sx:{mb:2},children:a(E,{variant:"body2",component:"pre",sx:{whiteSpace:"pre-wrap",fontFamily:"monospace",fontSize:"0.8rem"},children:e.message})}),a(A,{severity:"info",children:a(E,{variant:"body2",component:"pre",sx:{whiteSpace:"pre-wrap",fontFamily:"monospace",fontSize:"0.7rem",maxHeight:"200px",overflow:"auto"},children:e.stack})}),!1]}):null}),this.state={hasError:!1,error:null,errorInfo:null,showDetails:!1,retryCount:0}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){var r,a;this.setState({error:e,errorInfo:t}),this.logErrorToService(e,t),null==(a=(r=this.props).onError)||a.call(r,e,t)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:a(m,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"400px",p:3,textAlign:"center"},role:"alert","aria-live":"assertive",children:a(I,{sx:{maxWidth:600,width:"100%"},children:n(L,{children:[n(m,{sx:{display:"flex",alignItems:"center",mb:2},children:[a(R,{color:"error",sx:{fontSize:40,mr:2},"aria-hidden":"true"}),a(E,{variant:"h5",component:"h1",children:"Something went wrong"})]}),n(E,{variant:"body1",color:"text.secondary",sx:{mb:3},children:["We're sorry, but something unexpected happened.",this.state.retryCount<this.maxRetries?" You can try again or reload the page.":" Please reload the page to continue."]}),n(m,{sx:{display:"flex",gap:2,justifyContent:"center",mb:2},children:[this.state.retryCount<this.maxRetries?n(z,{variant:"contained",startIcon:a(N,{}),onClick:this.handleRetry,"aria-label":"Try again",children:["Try Again (",this.maxRetries-this.state.retryCount," left)"]}):a(z,{variant:"contained",startIcon:a(N,{}),onClick:this.handleReload,"aria-label":"Reload page",children:"Reload Page"}),n(z,{variant:"outlined",startIcon:this.state.showDetails?a(P,{}):a(O,{}),onClick:this.toggleDetails,"aria-label":this.state.showDetails?"Hide error details":"Show error details","aria-expanded":this.state.showDetails,children:[this.state.showDetails?"Hide":"Show"," Details"]})]}),a(D,{in:this.state.showDetails,children:this.renderErrorDetails()}),!1]})})}):this.props.children}}const Ye="/api/v1",qe={maxRetries:3,retryDelay:1e3,retryCondition:e=>!e.response||e.response.status>=500||429===e.response.status},Je=$e.create({baseURL:Ye,timeout:3e4,headers:{"Content-Type":"application/json"},validateStatus:e=>e<500});class Xe{static getAccessToken(){return localStorage.getItem(this.ACCESS_TOKEN_KEY)}static getRefreshToken(){return localStorage.getItem(this.REFRESH_TOKEN_KEY)}static setTokens(e,t){localStorage.setItem(this.ACCESS_TOKEN_KEY,e),localStorage.setItem(this.REFRESH_TOKEN_KEY,t)}static clearTokens(){localStorage.removeItem(this.ACCESS_TOKEN_KEY),localStorage.removeItem(this.REFRESH_TOKEN_KEY),this.refreshPromise=null}static async refreshAccessToken(){if(this.refreshPromise)return this.refreshPromise;const e=this.getRefreshToken();if(!e)throw new Error("No refresh token available");this.refreshPromise=this.performTokenRefresh(e);try{return await this.refreshPromise}finally{this.refreshPromise=null}}static async performTokenRefresh(e){try{const t=await $e.post(`${Ye}/auth/refresh`,{refreshToken:e}),{data:r}=t.data;if((null==r?void 0:r.accessToken)&&(null==r?void 0:r.refreshToken))return this.setTokens(r.accessToken,r.refreshToken),r.accessToken;throw new Error("Invalid refresh response")}catch(t){throw this.clearTokens(),"undefined"!=typeof window&&(window.location.href="/login"),t instanceof Error?t:new Error("Token refresh failed")}}static isTokenExpired(e){try{const t=JSON.parse(atob(e.split(".")[1])),r=Date.now()/1e3;return t.exp<=r}catch{return!0}}}function Qe(e){return new Promise(t=>setTimeout(t,e))}function Ze(e){var t,r;const a=e.response,n=e.request;if(a){const e=a.data;return{message:(null==e?void 0:e.message)||a.statusText||"Request failed",status:a.status,code:null==e?void 0:e.error,details:null==e?void 0:e.data,timestamp:(new Date).toISOString(),path:(null==(t=a.config)?void 0:t.url)||""}}return n?{message:"Network error - please check your connection",status:0,code:"NETWORK_ERROR",timestamp:(new Date).toISOString(),path:(null==(r=e.config)?void 0:r.url)||""}:{message:e.message||"Request configuration error",status:0,code:"REQUEST_ERROR",timestamp:(new Date).toISOString(),path:""}}t(Xe,"ACCESS_TOKEN_KEY","accessToken"),t(Xe,"REFRESH_TOKEN_KEY","refreshToken"),t(Xe,"refreshPromise",null),Je.interceptors.request.use(async e=>{e.headers=e.headers??{},e.headers["X-Request-ID"]=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);let t=Xe.getAccessToken();if(t){if(Xe.isTokenExpired(t))try{t=await Xe.refreshAccessToken()}catch(r){}t&&(e.headers.Authorization=`Bearer ${t}`)}return e.metadata={retryCount:0,startTime:Date.now(),...e.metadata},e},e=>Promise.reject(e)),Je.interceptors.response.use(e=>e,async e=>{var t,r;const a=e.config;if(!a)return Promise.reject(Ze(e));if(a.metadata||(a.metadata={retryCount:0}),401===(null==(t=e.response)?void 0:t.status)&&!a._retry){a._retry=!0;try{const e=await Xe.refreshAccessToken();return a.headers=a.headers??{},a.headers.Authorization=`Bearer ${e}`,Je(a)}catch{return Promise.reject(Ze(e))}}if(429===(null==(r=e.response)?void 0:r.status)){const t=e.response.headers["retry-after"],r=Number.parseInt(t||"1",10),n=Math.min(1e3*r,3e4);if(a.metadata.retryCount<qe.maxRetries)return a.metadata.retryCount++,await Qe(n),Je(a)}if(function(e){var t;return(null==(t=qe.retryCondition)?void 0:t.call(qe,e))||!1}(e)&&a.metadata.retryCount<qe.maxRetries){a.metadata.retryCount++;const e=function(e){const t=qe.retryDelay*Math.pow(2,e-1),r=.1*Math.random()*t;return Math.min(t+r,1e4)}(a.metadata.retryCount);return await Qe(e),Je(a)}return Promise.reject(Ze(e))});const et=(e,t)=>Je.get(e,t).then(nt),tt=(e,t,r)=>Je.post(e,t,r).then(nt),rt=(e,t,r)=>Je.put(e,t,r).then(nt),at=(e,t)=>Je.delete(e,t).then(nt);function nt(e){const t=e.data;if(t.success&&void 0!==t.data)return t.data;if(t.success&&void 0===t.data)return null;throw new Error(t.message||"Request failed")}const it={};const ot=new class{async login(e,t){try{const r={usernameOrEmail:e,password:t},a=await tt("/auth/login",r);return a.accessToken&&a.refreshToken&&Xe.setTokens(a.accessToken,a.refreshToken),a}catch(r){throw r}}async register(e){try{return await tt("/auth/register",e)}catch(t){throw t}}async logout(){try{await tt("/auth/logout")}catch(e){}finally{Xe.clearTokens(),this.clearUserCache(),"undefined"!=typeof window&&(window.location.href="/login")}}async refreshToken(){try{const e=await Xe.refreshAccessToken(),t=await this.getCurrentUser();return{accessToken:e,refreshToken:Xe.getRefreshToken()||"",tokenType:"Bearer",expiresIn:3600,user:{id:t.id,username:t.username,email:t.email,firstName:t.firstName,lastName:t.lastName,profilePictureUrl:t.profilePictureUrl,emailVerified:t.emailVerified}}}catch(e){throw e}}async getCurrentUser(){try{return await et("/auth/me")}catch(e){throw e}}async verifyEmail(e){try{const t={token:e};return await tt("/auth/verify-email",t)}catch(t){throw t}}async resendVerification(e){try{const t={email:e};return await tt("/auth/resend-verification",t)}catch(t){throw t}}async forgotPassword(e){try{const t={email:e};return await tt("/auth/forgot-password",t)}catch(t){throw t}}async resetPassword(e,t){try{const r={token:e,newPassword:t};return await tt("/auth/reset-password",r)}catch(r){throw r}}async updateProfile(e){try{const t=await rt("/auth/profile",e);return this.clearUserCache(),t}catch(t){throw t}}async changePassword(e){try{return await tt("/auth/change-password",e)}catch(t){throw t}}async checkUsernameAvailability(e){try{return await et(`/auth/check-username?username=${encodeURIComponent(e)}`)}catch(t){throw t}}async checkEmailAvailability(e){try{return await et(`/auth/check-email?email=${encodeURIComponent(e)}`)}catch(t){throw t}}async setupMFA(e){try{return await tt("/auth/mfa/setup",e)}catch(t){throw t}}async verifyMFA(e){try{const t=await tt("/auth/mfa/verify",e);return t.accessToken&&t.refreshToken&&Xe.setTokens(t.accessToken,t.refreshToken),t}catch(t){throw t}}async disableMFA(){try{return await tt("/auth/mfa/disable")}catch(e){throw e}}getOAuth2LoginUrl(e){return`${(null==it?void 0:it.VITE_API_BASE_URL)||"/api/v1"}/oauth2/authorize/${e}?redirect_uri=${encodeURIComponent(window.location.origin+"/oauth2/redirect")}`}getGoogleLoginUrl(){return this.getOAuth2LoginUrl("google")}getFacebookLoginUrl(){return this.getOAuth2LoginUrl("facebook")}getGithubLoginUrl(){return this.getOAuth2LoginUrl("github")}async handleOAuth2Callback(e,t,r){try{const a={code:e,state:t,provider:r},n=await tt("/auth/oauth2/callback",a);return n.accessToken&&n.refreshToken&&Xe.setTokens(n.accessToken,n.refreshToken),n.user}catch(a){throw a}}getAccessToken(){return Xe.getAccessToken()}getRefreshToken(){return Xe.getRefreshToken()}setTokens(e,t){Xe.setTokens(e,t)}clearTokens(){Xe.clearTokens()}isAuthenticated(){const e=this.getAccessToken();return!!e&&!Xe.isTokenExpired(e)}getUserFromToken(){const e=this.getAccessToken();if(!e)return null;try{const t=JSON.parse(atob(e.split(".")[1]));return{id:parseInt(t.sub),username:t.username,email:t.email,firstName:t.firstName,lastName:t.lastName}}catch(t){return null}}async validateSession(){try{return!!this.isAuthenticated()&&(await this.getCurrentUser(),!0)}catch(e){return this.clearTokens(),!1}}async deleteAccount(){try{const e=await at("/auth/account");return this.clearTokens(),this.clearUserCache(),e}catch(e){throw e}}async deactivateAccount(){try{return await tt("/auth/account/deactivate")}catch(e){throw e}}async reactivateAccount(e){try{return await tt("/auth/account/reactivate",{email:e})}catch(t){throw t}}async exportUserData(){try{return await et("/auth/data/export",{responseType:"blob"})}catch(e){throw e}}async getLoginHistory(){try{return await et("/auth/login-history")}catch(e){throw e}}async getActiveSessions(){try{return await et("/auth/sessions")}catch(e){throw e}}async revokeSession(e){try{return await at(`/auth/sessions/${e}`)}catch(t){throw t}}async revokeAllSessions(){try{const e=await at("/auth/sessions/all");return this.clearTokens(),e}catch(e){throw e}}clearUserCache(){"undefined"!=typeof window&&(localStorage.removeItem("user_profile"),localStorage.removeItem("user_preferences"),sessionStorage.removeItem("user_session_data"))}onTokenExpired(e){window.addEventListener("token-expired",e)}offTokenExpired(e){window.removeEventListener("token-expired",e)}},st=i.createContext(void 0),lt=({children:e})=>{const[t,r]=i.useState(null),[n,o]=i.useState(!0),[s,l]=i.useState(!1);i.useEffect(()=>{c()},[]);const c=async()=>{try{if(o(!0),ot.isAuthenticated()){const e=await ot.getCurrentUser();r(e),l(!0)}else r(null),l(!1)}catch(e){r(null),l(!1),ot.clearTokens()}finally{o(!1)}},d={user:t,isLoading:n,isAuthenticated:s,login:async(e,t)=>{var a,n;try{const a=await ot.login(e,t);r({id:a.user.id,username:a.user.username,email:a.user.email,firstName:a.user.firstName,lastName:a.user.lastName,profilePictureUrl:a.user.profilePictureUrl,emailVerified:a.user.emailVerified,isActive:!0,roles:[]}),l(!0)}catch(i){throw new Error((null==(n=null==(a=i.response)?void 0:a.data)?void 0:n.message)||"Login failed")}},logout:async()=>{try{await ot.logout()}catch(e){}finally{r(null),l(!1)}},register:async e=>{var t,r;try{await ot.register(e)}catch(a){throw new Error((null==(r=null==(t=a.response)?void 0:t.data)?void 0:r.message)||"Registration failed")}},refreshUser:async()=>{try{if(ot.isAuthenticated()){const e=await ot.getCurrentUser();r(e)}}catch(e){}},loginWithGoogle:async()=>{var e,t;try{const e=ot.getGoogleLoginUrl();window.location.href=e}catch(r){throw new Error((null==(t=null==(e=r.response)?void 0:e.data)?void 0:t.message)||"Google login failed")}},loginWithFacebook:async()=>{var e,t;try{const e=ot.getFacebookLoginUrl();window.location.href=e}catch(r){throw new Error((null==(t=null==(e=r.response)?void 0:e.data)?void 0:t.message)||"Facebook login failed")}}};return a(st.Provider,{value:d,children:e})},ct=()=>{const e=i.useContext(st);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},dt=({onToggleSidebar:e,onToggleTheme:t,isDarkMode:r=!1})=>{var c,d,h,u;const{user:p,logout:f}=ct(),x=o(),w=s(),b=U(),v=M(b.breakpoints.down("md")),[k,C]=i.useState(null),[S,T]=i.useState(null),[A,I]=i.useState(""),R=()=>{C(null)},z=()=>{T(null)},N=(()=>{const e=w.pathname.split("/").filter(e=>e),t=[{label:"Dashboard",path:"/dashboard",icon:a(he,{fontSize:"small"})}];let r="";return e.forEach((a,n)=>{r+=`/${a}`;const i={content:"Content",create:"Create",library:"Library",templates:"Templates",social:"Social Media",accounts:"Accounts",queue:"Publishing Queue",calendar:"Calendar",analytics:"Analytics",media:"Media & Assets",generator:"Image Generator",brandkit:"Brand Kit",settings:"Settings",team:"Team"}[a]||a.charAt(0).toUpperCase()+a.slice(1);(n<e.length-1||1===e.length)&&t.push({label:i,path:r,icon:null})}),t})(),P=[{id:1,title:"Post published successfully",time:"2 min ago",type:"success"},{id:2,title:"Content generation completed",time:"5 min ago",type:"info"},{id:3,title:"Scheduled post failed",time:"10 min ago",type:"error"},{id:4,title:"New team member joined",time:"1 hour ago",type:"info"}];return a(de,{position:"fixed",sx:{zIndex:e=>e.zIndex.drawer+1,bgcolor:"background.paper",color:"text.primary",boxShadow:1,borderBottom:"1px solid",borderColor:"divider"},children:n(ce,{children:[v&&a(g,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:e,sx:{mr:2},children:a(_,{})}),a(m,{sx:{display:"flex",alignItems:"center",mr:3},children:a(E,{variant:"h6",noWrap:!0,component:"div",sx:{fontWeight:"bold",background:"linear-gradient(45deg, #2196F3 30%, #21CBF3 90%)",backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"AI Content Pro"})}),!v&&a(m,{sx:{flexGrow:1,mr:2},children:a(F,{separator:a(W,{fontSize:"small"}),"aria-label":"breadcrumb",children:N.map((e,t)=>n(K,{color:t===N.length-1?"text.primary":"inherit",href:e.path,onClick:t=>{t.preventDefault(),x(e.path)},sx:{display:"flex",alignItems:"center",textDecoration:"none","&:hover":{textDecoration:"underline"}},children:[e.icon&&a(m,{sx:{mr:.5},children:e.icon}),e.label]},e.path))})}),!v&&a(m,{sx:{mr:2},children:a($,{size:"small",placeholder:"Search...",value:A,onChange:e=>I(e.target.value),sx:{minWidth:200,"& .MuiOutlinedInput-root":{bgcolor:"action.hover","&:hover":{bgcolor:"action.selected"}}},InputProps:{startAdornment:a(H,{position:"start",children:a(j,{fontSize:"small"})})}})}),n(m,{sx:{display:"flex",alignItems:"center",gap:1},children:[!v&&n(l,{children:[a(y,{title:"Create Content",children:a(g,{color:"primary",onClick:()=>x("/content/create"),children:a(B,{})})}),a(y,{title:"Schedule Post",children:a(g,{color:"primary",onClick:()=>x("/social/calendar"),children:a(V,{})})}),a(y,{title:"View Analytics",children:a(g,{color:"primary",onClick:()=>x("/analytics"),children:a(G,{})})})]}),a(y,{title:r?"Switch to Light Mode":"Switch to Dark Mode",children:a(g,{onClick:t,color:"inherit",children:a(r?Y:q,{})})}),a(y,{title:"Notifications",children:a(g,{color:"inherit",onClick:e=>{T(e.currentTarget)},children:a(J,{badgeContent:P.length,color:"error",children:a(X,{})})})}),a(y,{title:"Account",children:a(g,{size:"large","aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:e=>{C(e.currentTarget)},color:"inherit",children:(null==p?void 0:p.profilePictureUrl)?a(Q,{src:p.profilePictureUrl,alt:p.username,sx:{width:32,height:32}}):a(Q,{sx:{width:32,height:32,bgcolor:"primary.main"},children:(null==(c=null==p?void 0:p.firstName)?void 0:c.charAt(0))||(null==(d=null==p?void 0:p.username)?void 0:d.charAt(0))||"U"})})})]}),n(Z,{anchorEl:S,open:Boolean(S),onClose:z,PaperProps:{sx:{width:320,maxHeight:400}},children:[a(m,{sx:{p:2,borderBottom:1,borderColor:"divider"},children:a(E,{variant:"h6",children:"Notifications"})}),P.map(e=>a(ee,{onClick:z,children:n(m,{sx:{width:"100%"},children:[a(E,{variant:"body2",sx:{fontWeight:500},children:e.title}),a(E,{variant:"caption",color:"text.secondary",children:e.time})]})},e.id)),a(te,{}),a(ee,{onClick:()=>x("/notifications"),children:a(E,{variant:"body2",color:"primary",children:"View all notifications"})})]}),n(Z,{id:"menu-appbar",anchorEl:k,anchorOrigin:{vertical:"bottom",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:Boolean(k),onClose:R,PaperProps:{sx:{width:250}},children:[a(m,{sx:{p:2,borderBottom:1,borderColor:"divider"},children:n(m,{sx:{display:"flex",alignItems:"center",gap:2},children:[a(Q,{src:null==p?void 0:p.profilePictureUrl,sx:{width:40,height:40,bgcolor:"primary.main"},children:(null==(h=null==p?void 0:p.firstName)?void 0:h.charAt(0))||(null==(u=null==p?void 0:p.username)?void 0:u.charAt(0))||"U"}),n(m,{children:[n(E,{variant:"subtitle2",children:[null==p?void 0:p.firstName," ",null==p?void 0:p.lastName]}),a(E,{variant:"caption",color:"text.secondary",children:null==p?void 0:p.email})]})]})}),n(ee,{onClick:()=>{x("/profile"),R()},children:[a(re,{children:a(ae,{fontSize:"small"})}),a(ne,{children:"Profile"})]}),n(ee,{onClick:()=>{x("/settings"),R()},children:[a(re,{children:a(ie,{fontSize:"small"})}),a(ne,{children:"Settings"})]}),n(ee,{onClick:()=>x("/help"),children:[a(re,{children:a(oe,{fontSize:"small"})}),a(ne,{children:"Help & Support"})]}),n(ee,{onClick:()=>x("/feedback"),children:[a(re,{children:a(se,{fontSize:"small"})}),a(ne,{children:"Send Feedback"})]}),a(te,{}),n(ee,{onClick:async()=>{await f(),x("/login"),R()},children:[a(re,{children:a(le,{fontSize:"small"})}),a(ne,{children:"Logout"})]})]})]})})},ht=[{text:"Dashboard",icon:a(he,{}),path:"/dashboard"},{text:"Content",icon:a(ke,{}),children:[{text:"Create Content",icon:a(B,{}),path:"/content/create"},{text:"Content Library",icon:a(xe,{}),path:"/content/library"},{text:"Templates",icon:a(xe,{}),path:"/templates"},{text:"Version History",icon:a(we,{}),path:"/content/versions"},{text:"Workflow",icon:a(be,{}),path:"/content/workflow"},{text:"Export",icon:a(ve,{}),path:"/content/export"}]},{text:"Social Media",icon:a(Ae,{}),children:[{text:"Accounts",icon:a(Ce,{}),path:"/social/accounts"},{text:"Publishing Queue",icon:a(V,{}),path:"/social/queue",badge:5},{text:"Calendar",icon:a(Se,{}),path:"/social/calendar"},{text:"Analytics",icon:a(Te,{}),path:"/social/analytics"},{text:"Platform Settings",icon:a(c,{}),path:"/social/settings"},{text:"Content Optimization",icon:a(Ee,{}),path:"/social/optimization"}]},{text:"Media & Assets",icon:a(ze,{}),children:[{text:"Media Library",icon:a(Ie,{}),path:"/media/library"},{text:"Image Generator",icon:a(Re,{}),path:"/media/generator"},{text:"Brand Kit",icon:a(Re,{}),path:"/media/brandkit"},{text:"Asset Editor",icon:a(ze,{}),path:"/media/editor"},{text:"Video Processor",icon:a(Ne,{}),path:"/media/video"},{text:"Asset Analytics",icon:a(G,{}),path:"/media/analytics"}]},{text:"Analytics",icon:a(G,{}),path:"/analytics"},{text:"Team",icon:a(be,{}),path:"/team",role:["admin","manager"]}],ut=[{text:"Notifications",icon:a(X,{}),path:"/notifications",badge:3},{text:"Pricing",icon:a(Pe,{}),path:"/pricing"},{text:"Settings",icon:a(ie,{}),path:"/settings"},{text:"Help & Support",icon:a(oe,{}),path:"/help"}],pt=({collapsed:e=!1,onToggleCollapse:t})=>{const c=o(),d=s(),h=U(),[u,p]=i.useState(["Content","Social Media"]),[f,y]=i.useState(""),x=e=>d.pathname===e||d.pathname.startsWith(e+"/"),w=e=>f?e.filter(e=>{var t;const r=e.text.toLowerCase().includes(f.toLowerCase()),a=null==(t=e.children)?void 0:t.some(e=>e.text.toLowerCase().includes(f.toLowerCase()));return r||a}):e,b=(t,i=0)=>{var o;const s=t.children&&t.children.length>0,d=u.includes(t.text),h=(e=>{var t;return e.path?x(e.path):(null==(t=e.children)?void 0:t.some(e=>e.path&&x(e.path)))||!1})(t);return n(r.Fragment,{children:[a(ye,{disablePadding:!0,children:n(fe,{selected:h,onClick:()=>{var e,r;s?(r=t.text,p(e=>e.includes(r)?e.filter(e=>e!==r):[...e,r])):t.path&&(e=t.path,c(e))},sx:{pl:e?1:2+2*i,minHeight:48,"&.Mui-selected":{bgcolor:"primary.main",color:"primary.contrastText","&:hover":{bgcolor:"primary.dark"},"& .MuiListItemIcon-root":{color:"primary.contrastText"}}},children:[a(re,{sx:{minWidth:e?"auto":40},children:a(J,{badgeContent:t.badge,color:"error",children:t.icon})}),!e&&n(l,{children:[a(ne,{primary:t.text,primaryTypographyProps:{fontSize:i>0?"0.875rem":"1rem",fontWeight:h?600:400}}),s&&a(g,{size:"small",sx:{color:"inherit"},children:a(d?P:O,{})})]})]})}),s&&!e&&a(D,{in:d,timeout:"auto",unmountOnExit:!0,children:a(me,{component:"div",disablePadding:!0,children:null==(o=t.children)?void 0:o.map(e=>b(e,i+1))})})]},t.text)};return n(ge,{variant:"permanent",sx:{width:e?64:280,flexShrink:0,transition:h.transitions.create("width",{easing:h.transitions.easing.sharp,duration:h.transitions.duration.enteringScreen}),"& .MuiDrawer-paper":{width:e?64:280,boxSizing:"border-box",bgcolor:"background.paper",borderRight:"1px solid",borderColor:"divider",transition:h.transitions.create("width",{easing:h.transitions.easing.sharp,duration:h.transitions.duration.enteringScreen}),overflowX:"hidden"}},children:[n(ce,{children:[!e&&n(m,{sx:{display:"flex",alignItems:"center",width:"100%"},children:[a(E,{variant:"h6",noWrap:!0,component:"div",sx:{flexGrow:1},children:"AI Content"}),t&&a(g,{onClick:t,size:"small",children:a(ue,{})})]}),e&&t&&a(g,{onClick:t,size:"small",children:a(pe,{})})]}),!e&&a(m,{sx:{p:2},children:a($,{fullWidth:!0,size:"small",placeholder:"Search navigation...",value:f,onChange:e=>y(e.target.value),InputProps:{startAdornment:a(H,{position:"start",children:a(j,{fontSize:"small"})})}})}),a(me,{sx:{flexGrow:1,px:1},children:w(ht).map(e=>b(e))}),a(te,{}),a(me,{sx:{px:1},children:w(ut).map(e=>b(e))})]})},mt=()=>{const e=U(),t=M(e.breakpoints.down("md")),[r,o]=i.useState(!1),[s,l]=i.useState(!1),[c,h]=i.useState(!1),u=()=>{t?l(!s):o(!r)},p=r?64:280;return n(m,{sx:{display:"flex"},children:[a(dt,{onToggleSidebar:u,onToggleTheme:()=>{h(!c)},isDarkMode:c}),a(pt,{collapsed:r,onToggleCollapse:u}),n(m,{component:"main",sx:{flexGrow:1,bgcolor:"background.default",minHeight:"100vh",ml:t?0:`${p}px`,transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},children:[a(ce,{}),a(m,{sx:{p:{xs:1,sm:2,md:3}},children:a(d,{})})]})]})},gt=h`
  0% {
    opacity: 1;
  }
  50% {
    opacity: 0.5;
  }
  100% {
    opacity: 1;
  }
`,ft=h`
  0% {
    background-position: -468px 0;
  }
  100% {
    background-position: 468px 0;
  }
`;p(Oe)(({theme:e})=>({animation:`${ft} 1.2s ease-in-out infinite`,background:`linear-gradient(\n    90deg,\n    ${e.palette.grey[300]} 25%,\n    ${e.palette.grey[200]} 37%,\n    ${e.palette.grey[300]} 63%\n  )`,backgroundSize:"400% 100%"})),p(m)({animation:`${gt} 1.5s ease-in-out infinite`});const yt=({size:e=40,message:t,variant:r="circular",color:i="primary",fullScreen:o=!1})=>{U();const s=n(m,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:2,p:3},children:["circular"===r?a(De,{size:e,color:i}):a(m,{sx:{width:"100%",maxWidth:300},children:a(Le,{color:i})}),t&&a(E,{variant:"body2",color:"text.secondary",sx:{textAlign:"center"},children:t})]});return o?a(m,{sx:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255, 255, 255, 0.8)",backdropFilter:"blur(2px)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center"},children:a(I,{elevation:3,children:a(L,{children:s})})}):s},xt=i.createContext(void 0),wt=(e,t)=>{switch(t.type){case"ADD_NOTIFICATION":const r=[t.payload,...e.notifications];return{...e,notifications:r.slice(0,e.maxNotifications)};case"REMOVE_NOTIFICATION":return{...e,notifications:e.notifications.filter(e=>e.id!==t.payload)};case"UPDATE_NOTIFICATION":return{...e,notifications:e.notifications.map(e=>e.id===t.payload.id?{...e,...t.payload.updates}:e)};case"CLEAR_ALL":return{...e,notifications:[]};case"SET_POSITION":return{...e,position:t.payload};default:return e}},bt=e=>{switch(e){case"success":return a(We,{});case"error":return a(Ke,{});case"warning":return a(Fe,{});case"info":return a(_e,{});default:return a(X,{})}},vt=({notification:e,onClose:t,onUpdate:r})=>{const o=i.useCallback(()=>{t(e.id)},[e.id,t]),s=i.useCallback(()=>{var t;null==(t=e.action)||t.onClick(),e.persistent||o()},[e.action,e.persistent,o]);return n(A,{severity:e.type,variant:"filled",icon:bt(e.type),action:n(m,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.action&&a(g,{size:"small",color:"inherit",onClick:s,"aria-label":e.action.label,children:a(E,{variant:"button",sx:{fontSize:"0.75rem"},children:e.action.label})}),a(g,{size:"small",color:"inherit",onClick:o,"aria-label":"Close notification",children:a(Me,{fontSize:"small"})})]}),sx:{mb:1,minWidth:300,maxWidth:500,boxShadow:3,"& .MuiAlert-message":{width:"100%"}},children:[e.title&&a(Ue,{children:e.title}),a(E,{variant:"body2",children:e.message}),"number"==typeof e.progress&&n(m,{sx:{mt:1},children:[a(Le,{variant:"determinate",value:e.progress,sx:{backgroundColor:"rgba(255, 255, 255, 0.3)","& .MuiLinearProgress-bar":{backgroundColor:"rgba(255, 255, 255, 0.8)"}}}),n(E,{variant:"caption",sx:{mt:.5,display:"block"},children:[Math.round(e.progress),"% complete"]})]})]})},kt=({children:e,maxNotifications:t=5,defaultPosition:r="top-right",defaultDuration:o=5e3})=>{const[s,l]=i.useReducer(wt,{notifications:[],position:r,maxNotifications:t}),c=i.useCallback(e=>{const t=`notification-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,r={...e,id:t,timestamp:Date.now(),duration:e.duration??o};return l({type:"ADD_NOTIFICATION",payload:r}),!e.persistent&&"number"==typeof r.duration&&r.duration>0&&setTimeout(()=>{l({type:"REMOVE_NOTIFICATION",payload:t})},r.duration),t},[o]),d=i.useCallback(e=>{l({type:"REMOVE_NOTIFICATION",payload:e})},[]),h=i.useCallback((e,t)=>{l({type:"UPDATE_NOTIFICATION",payload:{id:e,updates:t}})},[]),u=i.useCallback(()=>{l({type:"CLEAR_ALL"})},[]),p=i.useCallback(e=>{l({type:"SET_POSITION",payload:e})},[]),g={notifications:s.notifications,showNotification:c,hideNotification:d,updateNotification:h,clearAll:u,setPosition:p};return n(xt.Provider,{value:g,children:[e,a(m,{sx:(e=>{const t={position:"fixed",zIndex:9999,pointerEvents:"none"};return e.includes("top")?t.top=24:t.bottom=24,e.includes("left")?t.left=24:e.includes("right")?t.right=24:(t.left="50%",t.transform="translateX(-50%)"),t})(s.position),children:s.notifications.map(e=>a(m,{sx:{pointerEvents:"auto"},children:a(vt,{notification:e,onClose:d,onUpdate:h})},e.id))})]})},Ct=({message:e="Loading...",size:t=40})=>n(m,{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",minHeight:"100vh",gap:2,children:[a(De,{size:t}),a(E,{variant:"body2",color:"text.secondary",children:e})]}),St=({children:e,requiredRoles:t=[]})=>{const{isAuthenticated:r,isLoading:n,user:i}=ct(),o=s();if(n)return a(Ct,{message:"Authenticating..."});if(!r)return a(u,{to:"/login",state:{from:o},replace:!0});if(t.length>0&&i){if(!t.some(e=>{var t;return null==(t=i.roles)?void 0:t.includes(e)}))return a(u,{to:"/dashboard",replace:!0})}return a(l,{children:e})};export{je as A,Ge as E,yt as L,kt as N,St as P,Je as a,mt as b,Ve as c,lt as d,ct as u};
